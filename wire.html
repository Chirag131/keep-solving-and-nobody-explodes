<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wire Defusal Module</title>
<style>
  body {
    background-color: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: monospace;
  }

  .bomb {
    position: relative;
    width: 520px;
    height: 320px;
    background: #1b1b1b;
    border-radius: 20px;
    box-shadow: inset 0 0 30px #000, 0 0 20px #000;
    border: 3px solid #333;
    overflow: hidden;
  }

  .timer {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: #000;
    color: #ff3b3b;
    font-size: 2em;
    padding: 8px 25px;
    border-radius: 10px;
    border: 2px solid #600;
    text-shadow: 0 0 5px red;
  }

  .stop-btn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: red;
    color: white;
    border: none;
    padding: 10px 25px;
    font-size: 1.2em;
    font-weight: bold;
    border-radius: 25px;
    cursor: pointer;
    box-shadow: 0 0 15px red;
    transition: 0.2s;
  }

  .stop-btn:hover {
    background: darkred;
  }

  svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 520px;
    height: 320px;
    cursor: pointer;
  }

  .node {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #bbb, #555);
    border-radius: 50%;
    border: 2px solid #222;
    box-shadow: inset 0 0 3px #000, 0 0 4px #111;
    z-index: 3;
  }

  .node.left { left: 10px; }
  .node.right { right: 10px; }

  .spark {
    fill: yellow;
    opacity: 0.9;
    animation: sparkAnim 0.5s ease-out forwards;
  }

  @keyframes sparkAnim {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(3); opacity: 0; }
  }

  .wire-shadow {
    filter: drop-shadow(0 0 2px #000);
  }
</style>
</head>
<body>
  <div class="bomb">
    <div class="timer" id="timer">00:45</div>
    <button class="stop-btn" id="stopBtn">STOP</button>

    <!-- Connection Nodes -->
    <div class="node left" style="top: 70px;"></div>
    <div class="node right" style="top: 70px;"></div>

    <div class="node left" style="top: 140px;"></div>
    <div class="node right" style="top: 140px;"></div>

    <div class="node left" style="top: 210px;"></div>
    <div class="node right" style="top: 210px;"></div>

    <!-- Wires -->
    <svg id="wires">
      <path id="redWire" class="wire-shadow" d="M 20 80 C 150 40, 300 120, 500 80" stroke="red" stroke-width="6" fill="none" stroke-linecap="round"/>
      <path id="blueWire" class="wire-shadow" d="M 20 150 C 150 110, 300 190, 500 150" stroke="blue" stroke-width="6" fill="none" stroke-linecap="round"/>
      <path id="greenWire" class="wire-shadow" d="M 20 220 C 150 180, 300 260, 500 220" stroke="lime" stroke-width="6" fill="none" stroke-linecap="round"/>
    </svg>
  </div>

<script>
  const wires = [
    { id: 'redWire', y: 80, color: 'red' },
    { id: 'blueWire', y: 150, color: 'blue' },
    { id: 'greenWire', y: 220, color: 'lime' }
  ];

  // Randomly select correct wire for this module (expert knows via manual)
  const correctWire = wires[Math.floor(Math.random() * wires.length)].id;
  let gameOver = false;

  wires.forEach(wire => {
    const path = document.getElementById(wire.id);
    path.addEventListener('click', () => cutWire(wire));
  });

  function cutWire(wire) {
    if (gameOver) return;
    const path = document.getElementById(wire.id);
    if (!path || path.dataset.cut === "true") return;
    path.dataset.cut = "true";
    path.remove();

    // Split animation
    const svg = document.getElementById("wires");
    const leftPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    leftPath.setAttribute("d", `M 20 ${wire.y} C 150 ${wire.y - 40}, 200 ${wire.y + 10}, 250 ${wire.y - 20}`);
    leftPath.setAttribute("stroke", wire.color);
    leftPath.setAttribute("stroke-width", 6);
    leftPath.setAttribute("fill", "none");
    leftPath.setAttribute("stroke-linecap", "round");
    leftPath.classList.add("wire-shadow");

    const rightPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    rightPath.setAttribute("d", `M 270 ${wire.y + 10} C 320 ${wire.y + 40}, 400 ${wire.y - 20}, 500 ${wire.y}`);
    rightPath.setAttribute("stroke", wire.color);
    rightPath.setAttribute("stroke-width", 6);
    rightPath.setAttribute("fill", "none");
    rightPath.setAttribute("stroke-linecap", "round");
    rightPath.classList.add("wire-shadow");

    const spark = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    spark.setAttribute("cx", 260);
    spark.setAttribute("cy", wire.y);
    spark.setAttribute("r", 5);
    spark.classList.add("spark");

    svg.appendChild(leftPath);
    svg.appendChild(rightPath);
    svg.appendChild(spark);

    // Explosion or defusal effect
    if (wire.id === correctWire) {
      document.body.style.backgroundColor = "#0f0"; // green flash
      setTimeout(() => alert("âœ… Bomb Defused!"), 500);
    } else {
      document.body.style.backgroundColor = "#900";
      setTimeout(() => alert("ðŸ’¥ Explosion!"), 500);
    }

    setTimeout(() => spark.remove(), 600);
    gameOver = true;
  }

  // Timer countdown (for tension)
  let seconds = 45;
  const timerDisplay = document.getElementById("timer");
  const timer = setInterval(() => {
    if (seconds <= 0 || gameOver) {
      clearInterval(timer);
      if (!gameOver) alert("ðŸ’¥ Time ran out!");
      gameOver = true;
      return;
    }
    seconds--;
    timerDisplay.textContent = "00:" + (seconds < 10 ? "0" + seconds : seconds);
  }, 1000);
</script>
</body>
</html>
